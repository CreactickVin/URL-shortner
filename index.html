<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>URL shorter</title>


  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">


  <style>
    :root {
      --background: #0B101B;
      --primary-pink: #EB568E;
      --primary-blue: #144EE3;
      --black: #Black;
      --grey: #181E29;
      --lite: #C9CED6;
      --btn-border: #353C4A;
      --active-green: #1EB036;
      --inactive-yellow: #B0901E;
    }

    @font-face {
      font-family: 'SF-Pro';
      src: url('font/SF-Pro-Display-Heavy.otf') format('opentype');
      font-weight: 300;
    }

    @font-face {
      font-family: 'SF-Pro';
      src: url('font/SF-Pro-Display-Heavy.otf') format('opentype');
      font-weight: 200;
    }

    @font-face {
      font-family: 'SF-Pro';
      src: url('font/SF-Pro-Display-Regular.otf') format('opentype');
      font-weight: 100;
    }

    * {
      margin: 0;
      padding: 0;
    }

    a {
      text-decoration: none;
      color: var(--lite);
    }

    body {
      /*height: 100%;*/
      /*width: 100%;*/
      background-image: url("/images/Cubes.png"), url("/images/Swirl.png");
      background-position: top, center;
      background-repeat: no-repeat, no-repeat;
      background-size: auto;
      background-color: #0B101B;
      color: var(--lite);
      font-family: 'SF-Pro', sans-serif;
      font-weight: 100;
    }


    /*@keyframes rotate-bg {*/
    /*  0% {*/
    /*    transform: rotate(0deg);*/
    /*  }*/
    /*  100% {*/
    /*    transform: rotate(360deg);*/
    /*  }*/
    /*}*/

    .brand-name {
      background: radial-gradient(95.19% 12441.23% at 5.56% 79.01%, #EB568E 0%, #144EE3 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-weight: 200;
    }

    .btn-login {
      background-color: var(--grey);
      font-weight: 200;
    }

    .btn-register {
      background-color: var(--primary-blue);
      border: 1px solid var(--primary-blue);
      box-shadow: 10px 9px 22px 0 rgba(20, 78, 227, 0.38);
      font-weight: 200;
    }

    .tagline {
      font-size: 50px;
      background: linear-gradient(89.92deg, #144EE3 -0.02%, #EB568E 18.86%, #A353AA 64.49%, #144EE3 100.67%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .description {
      width: 544px;
    }

    .search-wrapper {
      width: 600px;
      background-color: var(--grey);
      border: 3px solid #353c4a;
    }

    .input-wrapper {
      width: 70%;
    }

    .searchbar {
      width: 100%;
      background-color: var(--grey);
      border: none;
      outline: none;
      caret-color: var(--primary-pink);
      font-weight: 100;
    }

    .btn-short {
      width: 30%;
      background-color: var(--primary-blue);
      box-shadow: 10px 9px 22px 0px rgba(20, 78, 227, 0.38);
      font-size: 14px;
      font-weight: 200;
    }

    .toggle-box {
      border: 2px solid #353c4a;
      background-color: var(--grey);
      width: 44px;
      height: 25px;
      position: relative;
    }

    .toggle-dot {
      height: 13px;
      width: 13px;
      background-color: var(--primary-blue);
      position: absolute;
      top: 4px;
      right: 3px;
    }

    .dark-pink {
      font-weight: 200;
      color: var(--primary-pink);
    }

    .green {
      color: var(--active-green) !important;
    }

    .yellow {
      color: var(--inactive-yellow) !important;
    }

    /*changes heading color of table*/
    thead > tr {
      --bs-table-bg: #181E29;
    }

    /*changes table body background color & removes border*/
    tbody > tr {
      --bs-table-bg: #0f1520;
    }

    /*adds padding & removes border*/
    .table > :not(caption) > * > * {
      padding: 1rem 1.2rem;
      margin-top: 0.18rem;
      border: 10px solid transparent !important;
    }

    table > thead > tr > th:nth-child(1) {
      border-top-left-radius: 10px;
    }

    table > thead > tr > th:last-child {
      border-top-right-radius: 10px;
    }

    .footer {
      height: 90px;
      background: linear-gradient(180deg, rgba(11, 16, 27, 0.00) 15.74%, rgba(11, 16, 27, 0.57) 50.38%);
      filter: blur(21px);
      backdrop-filter: blur(20px);
    }

    .link-register {
      color: var(--primary-blue);
      text-decoration: underline;
    }
  </style>
</head>
<body class="d-flex flex-column align-items-center">
<div class="container mt-4 d-flex justify-content-between align-items-center">
  <div class="logo">
    <span class="brand-name fs-3">Linkly</span><span class="text-secondary">Â®</span>
  </div>

  <div>
    <button class="btn-login btn btn-dark px-4 py-3 rounded-pill text-light border-2">Login
      <img class="ms-1" src="./icons/sign-in.svg" alt="slider"></button>
    <button class="btn-register btn btn-primary px-5 py-3 ms-3 rounded-pill text-light">Register
      Now
    </button>
  </div>
</div>


<div class="container d-flex flex-column align-items-center justify-content-center mt-5 pt-5">
  <h1 class="tagline">Shorten Your Loooong Links :)</h1>
  <p class="description mt-3  text-center">Linkly is an efficient and easy-to-use URL shortening service that
    streamlines your online experience .</p>

  <div class="search-wrapper mt-4 ps-4 pt-1 pe-1 pb-1 d-flex  rounded-pill">
    <div class="input-wrapper d-flex align-items-center">
      <img src="./icons/link-plain.svg" alt="link">
      <input type="text" class="searchbar mx-3 text-light" placeholder="Enter link here"
             onkeydown="handleInput(event)"></div>
    <button class="btn-short btn btn-primary px-4 py-3 rounded-pill text-light" onclick="handleInputButton()">Shorten
      Now!
    </button>
  </div>

  <div class="d-flex my-4">
    <div class="toggle-box rounded-pill">
      <div class="toggle-dot rounded-pill"></div>
    </div>
    <span class="ms-3">Auto Paste from Clipboard </span>
  </div>

  <div class="my-3">
    <span>You can create
      <span class="dark-pink">05</span> more links. Register  Now to enjoy Unlimited usage</span>
    <img class="ms-2" src="./icons/question-circle.svg" alt="question mark circle">
  </div>
</div>

<div class="container">
  <table class="table table-dark">
    <thead>
    <tr>
      <th>Short Link</th>
      <th>Original Link</th>
      <th>QR Code</th>
      <th>Clicks</th>
      <th>Status</th>
      <th>Date <img src="./icons/slider.svg" alt="sort slider"></th>
    </tr>
    </thead>

    <tbody>
    <tr>
      <td>https://linkly.com/Bn41aCOlnxj<img src="./icons/copy.svg" alt="copy"></td>
      <td><img src="./images/twitter-logo.png" alt="twitter">
        <a class="ms-3" href="https://www.twitter.com/tweets/8erelCoihu/">
          https://www.twitter.com/tweets/8erelCoihu/</a>
      </td>
      <td><img src="./icons/qr.svg" alt="qr code"></td>
      <td>1313</td>
      <td class="green">Active<img src="./icons/link.svg" alt="link"></td>
      <td>Oct - 10 -2023</td>
    </tr>
    <tr>
      <td>https://linkly.com/Bn41aCOlnxj <img src="./icons/copy.svg" alt="copy"></td>
      <td><img src="./images/youtube-logo.png" alt="youtube">
        <a class="ms-3" href="https://www.youtube.com/watch?v=8J7ZmH0lXuk">
          https://www.youtube.com/watch?v=8J7ZmH0lXuk</a>
      </td>
      <td><img src="./icons/qr.svg" alt="qr code"></td>
      <td>1313</td>
      <td class="yellow">Inactive<img src="./icons/unlink.svg" alt="unlink"></td>
      <td>Oct - 10 -2023</td>
    </tr>
    <tr>
      <td>https://linkly.com/Bn41aCOlnxj <img src="./icons/copy.svg" alt="copy"></td>
      <td><img src="./images/a-logo.png" alt="a">
        <a class="ms-3" href="https://www.adventuresinwanderlust.com/">
          https://www.adventuresinwanderlust.com/</a>
      </td>
      <td><img src="./icons/qr.svg" alt="qr code"></td>
      <td>4313</td>
      <td class="green">Active<img src="./icons/link.svg" alt="link"></td>
      <td>Oct - 08 -2023</td>
    </tr>
    <tr>
      <td>https://linkly.com/Bn41aCOlnxj <img src="./icons/copy.svg" alt="copy"></td>
      <td><img src="./images/v-logo.png" alt="v">
        <a class="ms-3" href="https://vimeo.com/625257654">
          https://vimeo.com/625257654</a>
      </td>
      <td><img src="./icons/qr.svg" alt="qr code"></td>
      <td>1013</td>
      <td class="green">Active<img src="./icons/link.svg" alt="link"></td>
      <td>Oct - 01 -2023</td>
    </tr>
    <tr>
      <td>https://linkly.com/Bn41aCOlnxj<img src="./icons/copy.svg" alt="copy"></td>
      <td><img src="./images/unsplash-logo.png" alt="twitter">
        <a class="ms-3" href="https://unsplash.com/photos/2KjNwOzFfVQ">
          https://unsplash.com/photos/2KjNwOzFfVQ</a>
      </td>
      <td><img src="./icons/qr.svg" alt="qr code"></td>
      <td>1313</td>
      <td class="green">Active<img src="./icons/link.svg" alt="link"></td>
      <td>Sep - 20 -2023</td>
    </tr>
    <tr>
      <td>https://linkly.com/Bn41aCOlnxj<img src="./icons/copy.svg" alt="copy"></td>
      <td><img src="./images/youtube-logo.png" alt="youtube">
        <a class="ms-3" href="https://www.travelwiththejoneses.com/">
          https://www.travelwiththejoneses.com/</a>
      </td>
      <td><img src="./icons/qr.svg" alt="qr code"></td>
      <td>1423</td>
      <td class="green">Active<img src="./icons/link.svg" alt="link"></td>
      <td>Sep - 18 -2023</td>
    </tr>
    </tbody>
  </table>


  <div class="footer fixed-bottom d-flex align-items-center justify-content-center">
    <a class="link-register" href="#">Register Now</a> to enjoy Unlimited History
  </div>

</div>

<script>
  const tbody = document.querySelector('tbody')
  const inputbar = document.querySelector('.searchbar')
  const date = new Date().toLocaleDateString('en-us', { day: 'numeric', month: 'short', year: 'numeric' })
  const currentDate = `${date.slice(0, 3)} - ${date.slice(4, 6)} - ${date.slice(8, 13)}`

  let rows = getRows()

  for (const item of rows) {
    const row = document.createElement('tr') //table row

    const shortLink = document.createElement('td')
    const copy = document.createElement('img')
    const shortenedLink = document.createTextNode(item.shortLink)
    copy.setAttribute('src', './icons/copy.svg')
    copy.setAttribute('alt', 'copy')
    shortLink.appendChild(shortenedLink)
    shortLink.appendChild(copy)

    const ogLink = document.createElement('td')
    const icon = document.createElement('img')
    const aTag = document.createElement('a')
    icon.setAttribute('src', './images/twitter-logo.png')
    icon.setAttribute('alt', 'twitter')
    aTag.classList.add('ms-3')
    aTag.setAttribute('href', item.link)
    const link = document.createTextNode(item.link)
    aTag.appendChild(link)
    ogLink.appendChild(icon)
    ogLink.appendChild(aTag)

    const qrCode = document.createElement('td')
    const qr = document.createElement('img')
    qr.setAttribute('src', './icons/qr.svg')
    qr.setAttribute('alt', 'qr code')
    qrCode.appendChild(qr)

    const clicks = document.createElement('td')
    const count = document.createTextNode('0')
    clicks.appendChild(count)

    const status = document.createElement('td')
    const text = document.createTextNode(`${item.status ? 'Active' : 'Inactive'}`)
    const linkIcon = document.createElement('img')
    status.classList.add('green')
    linkIcon.setAttribute('src', './icons/link.svg')
    linkIcon.setAttribute('alt', 'link')
    status.appendChild(text)
    status.appendChild(linkIcon)

    const date = document.createElement('td')
    const dateText = document.createTextNode(`${item.date}`)
    date.appendChild(dateText)

    row.appendChild(shortLink)
    row.appendChild(ogLink)
    row.appendChild(qrCode)
    row.appendChild(clicks)
    row.appendChild(status)
    row.appendChild(date)

    tbody.insertBefore(row, tbody.firstChild)
  }

  function handleInput(event) {
    if (event.target.value && event.key === 'Enter') {
      //adding row
      addRow()
    }
  }

  function handleInputButton() {
    if (inputbar.value !== '') {
      //adding row
      addRow()
    }
  }

  function addRow() {
    const rows = getRows()

    const userLink = inputbar.value
    console.log('usr input link', userLink)
    const row = document.createElement('tr') //table row

    const shortLink = document.createElement('td')
    const copy = document.createElement('img')
    const shortenedLink = document.createTextNode(`${getShortLink(userLink)}`)
    copy.setAttribute('src', './icons/copy.svg')
    copy.setAttribute('alt', 'copy')
    shortLink.appendChild(shortenedLink)
    shortLink.appendChild(copy)

    const ogLink = document.createElement('td')
    const icon = document.createElement('img')
    const aTag = document.createElement('a')
    icon.setAttribute('src', './images/twitter-logo.png')
    icon.setAttribute('alt', 'twitter')
    aTag.classList.add('ms-3')
    aTag.setAttribute('href', `${userLink}`)
    const link = document.createTextNode(`${userLink}`)
    aTag.appendChild(link)
    ogLink.appendChild(icon)
    ogLink.appendChild(aTag)

    const qrCode = document.createElement('td')
    const qr = document.createElement('img')
    qr.setAttribute('src', './icons/qr.svg')
    qr.setAttribute('alt', 'qr code')
    qrCode.appendChild(qr)

    const clicks = document.createElement('td')
    const count = document.createTextNode('0')
    clicks.appendChild(count)

    const status = document.createElement('td')
    const text = document.createTextNode('Active')
    const linkIcon = document.createElement('img')
    status.classList.add('green')
    linkIcon.setAttribute('src', './icons/link.svg')
    linkIcon.setAttribute('alt', 'link')
    status.appendChild(text)
    status.appendChild(linkIcon)

    const date = document.createElement('td')
    const dateText = document.createTextNode(`${currentDate}`)
    date.appendChild(dateText)

    rows.push({
      link: `${userLink}`,
      shortLink: 'https://linkly.com/Bn41aCOlnxj',
      status: true,
      date: currentDate
    }) //pushes the input into the array
    inputbar.value = '' //empties the input field

    row.appendChild(shortLink)
    row.appendChild(ogLink)
    row.appendChild(qrCode)
    row.appendChild(clicks)
    row.appendChild(status)
    row.appendChild(date)

    tbody.insertBefore(row, tbody.firstChild)

    setRows(rows)
  }

  async function getShortLink(url) {
    const apiKey = '33cbd81c8f88eb05c5c1b005e120bd8bc7a71'
    const api = `https://cutt.ly/api/api.php?key=${apiKey}&short=${url}`
    const response = await fetch(api, {
      mode: 'no-cors',
      method: 'GET',
      headers: {
        'Access-Control-Allow-Origin': 'http://localhost:63342/',
        'Access-Control-Allow-Credentials': 'true'
      }
    })

    const result = await response.json()

    console.log('ANSWER-->', result)

  }

  function getRows() {
    return JSON.parse(localStorage.getItem('Links')) || []
  }

  function setRows(rows) {
    localStorage.setItem('Links', JSON.stringify(rows))
  }


</script>

</body>
</html>

